@model Plenamente.Models.ViewModel.PlandetrabajoActividadesViewModel
@using Plenamente.App_Tool;
@using Plenamente.Models.ViewModel;

@{
    ViewBag.Title = "Actividades plan de trabajo";
    Layout = "~/Views/Shared/_LayoutAdministrador.cshtml";
}
<div class="colorVerdeBack">
    <p>Crear plan de trabajo</p>
</div>

<div class="contenidoCuerpo">
    <div class="panel panel-default text-center justify-content-center">
        @using (Html.BeginForm())
        {
            <input type="hidden" name="IdPlantTrabajo" id="IdPlantTrabajo" value=@Model.IdPlantTrabajo />
            @Html.AntiForgeryToken()

            <div class="form-horizontal">
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="form-group justify-content-center">
                    @Html.LabelFor(model => model.NombrePlanTrabajo, htmlAttributes: new { @class = "control-label" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.NombrePlanTrabajo, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                        @Html.ValidationMessageFor(model => model.NombrePlanTrabajo, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(model => model.IdActiCumplimiento, htmlAttributes: new { @class = "control-label" })
                    @Html.DropDownListFor(x => x.IdActiCumplimiento, (SelectList)ViewBag.actividades, "Actividad", new { @class = "form-control ", id = "IdActiCumplimiento" })
                    @Html.ValidationMessageFor(model => model.IdActiCumplimiento, "", new { @class = "text-danger" })
                </div>
                <div class="form-group">
                    @Html.LabelFor(model => model.IdUser, htmlAttributes: new { @class = "control-label" })
                    @Html.DropDownListFor(x => x.IdUser, (SelectList)ViewBag.users, "Responsable", new { @class = "form-control", id = "IdUser" })
                    @Html.ValidationMessageFor(model => model.IdUser, "", new { @class = "text-danger" })
                </div>
                <label class="text-danger">@ViewBag.TextError</label>

                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="Crear" class="btn btn-default" />
                    </div>
                </div>
            </div>
        }
        <table class="table table-bordered text-center justify-content-center">
            <tr>
                <th>
                    Nombre Plan
                </th>
                <th>
                    Actividad
                </th>
                <th>
                    Responsable
                </th>
                <th>
                    Opciones
                </th>
            </tr>


            @foreach (var item in (List<ActividadesAsignadasPlanDeTrabajoViewModel> )ViewBag.actividadesAsignadas)
            {
                <tr>
                    <td>
                        @item.NombrePlanTrabajo
                    </td>
                    <td>
                        @item.DescripcionCumplimiento
                    </td>
                    <td>
                        @item.NombreUser
                    </td>
                    <td>
                        <a class="btn btn-success" href="@Url.Action(" EliminarActividadPlanTrabajo", "PlandeTrabajo" , new { IdUserPlanTrabajo=item.IdUserPlanDeTrabajoActividad })" title="Eliminar">
                            Eliminar
                        </a>

                    </td>
                </tr>
            }

        </table>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Crear Actividad" class="btn btn-default" />
            </div>
        </div>



    </div>

</div>
<div class="contenidoVolver">
    <a href="@Url.Action("Index", "PlandeTrabajo")" class="ayudaTitulos">
        <span>Volver a los planes de trabajo</span> <img src="~/Imagenes/flecha-hacia-la-izquierda.png" />
    </a>
</div>

